(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{1:function(e,t){e.exports=libs},26:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.costWay=void 0,a(51);var n=f(a(0)),i=f(a(2)),l=a(9),d=a(8);function f(e){return e&&e.__esModule?e:{default:e}}var u={_id:"",_feeApllyNum:0,_fee:!1,_ischeck:0,_actDetail:null,_canRefund:1,_refundTime:"",init:function(){var e=this;(0,n.default)("#fee").on("click",function(){e._showfee(),(0,n.default)("input[name=applyCostType]").val("收费"),e._fee=!0}),(0,n.default)("#unfee").on("click",function(){e._showunfee(),(0,n.default)("input[name=applyCostType]").val("免费"),e._fee=!1}),(0,n.default)("#addfee").on("click",function(){e._addfeeItem()}),(0,n.default)("#feeItem").on("click",".removeIcon",function(t){e._removeItem(t.currentTarget)}),(0,n.default)(".refund").on("click",function(t){e.refund(t.currentTarget)}),(0,n.default)("#applyCostCancel").on("click",function(t){e.hide()}),(0,n.default)("#applyCostSave").on("click",function(t){e._saveApply()})},hide:function(){(0,n.default)("#setApplyCost").hide()},show:function(){(0,n.default)("#setApplyCost").show()},_setBeforeActRefund:function(){this._canRefund=1,window.localStorage.setItem("post_canRefund",1)},_setConfirmTimeRefund:function(){this._canRefund=2,window.localStorage.setItem("post_canRefund",2)},_setUnRefund:function(){this._canRefund=3,window.localStorage.setItem("post_canRefund",3)},refund:function(e){var t=this,a=(0,n.default)(".feeitems").find("input.feeprice"),f=!1;if(a.length>0){for(var u=0;u<a.length;u++){var s=(0,l.Trim)(a[u].value,"g");console.log(s),"0"!==s&&""!==s||(f=!0)}f?i.default.alert("费用金额要大于0"):i.default.actionSheet([{label:"活动开始前均可申请退款",onClick:function(){(0,n.default)(".refund").find(".weui-select input").val("活动开始前均可申请退款"),t._setBeforeActRefund()}},{label:"指定时间前可申请退款",onClick:function(){d.pickerData.showDate(e),t._setConfirmTimeRefund()}},{label:"不支持退款",onClick:function(){(0,n.default)(".refund").find(".weui-select input").val("不支持退款"),t._setUnRefund()}}],[{label:"取消",onClick:function(){console.log("取消")}}])}else i.default.alert("请先设置金额")},_applyCostTemp:function(e,t,a){return""+e.map(function(n,i){return'\n    <li class="row">\n   \n    <div class="col-70">\n    <div class="act_cost_title f-l">'+e[i]+'</div>\n    <input type="hidden" name="applyCostName[]" value="'+e[i]+'">\n    <div class="act_cost_people f-s ">\n    <span>名额</span>'+a[i]+'人\n    <input type="hidden" name="applyCostNum[]" value="'+a[i]+'">\n    </div>\n    </div>\n    <div class="col-30">\n    <div class="act_cost_num f-l-x">￥<span>'+t[i]+'</span></div>\n    <input type="hidden" name="applyCostPrice[]" value="'+t[i]+'">\n    </div></li>\n  '}).join("")},_saveApply:function(){var e=0;if(this._fee){var t=[],a=[],l=[],d=parseInt(n.default.trim((0,n.default)("#feeApllyNum").val()));(0,n.default)("#feeItem .feeitems").each(function(i,d){t[i]=(0,n.default)(this).find(".fyName").val(),a[i]=(0,n.default)(this).find(".feeprice").val(),l[i]=(0,n.default)(this).find(".feenum").val(),e+=parseInt((0,n.default)(this).find(".feenum").val())});var f=t.length;if(f>0)for(var u=0;u<f;u++){if(""===t[u])return i.default.alert("第"+(u+1)+"项的费用名称不能为空"),!1;if(""===a[u])return i.default.alert("第"+(u+1)+"项的费用金额不能为空"),!1;if(""===l[u])return i.default.alert("第"+(u+1)+"项的费用名额不能为空"),!1;if(t[u]===t[u+1])return i.default.alert("费用名称重复："+t[u]),!1}else i.default.alert("请设置费用");if(""===n.default.trim((0,n.default)("#feeApllyNum").val()))return i.default.alert("活动总名额不能为空"),!1;if(d<e)return i.default.alert("费用设置名额之合不能大于活动总名额"),!1;(0,n.default)("#fymx").append(this._applyCostTemp(t,a,l)),(0,n.default)("#actCost").find(".weui-select").html("收费"),i.default.alert("添加成功"),this.hide()}else(0,n.default)("#actCost").find(".weui-select").html("免费"),(0,n.default)(".act_cost_ticket").remove(),i.default.alert("添加成功"),this.hide();(0,n.default)("input[name=applyCostNums]").val((0,n.default)("input[name=fysfzme]").val()),(0,n.default)("input[name=ExpDescr]").val((0,n.default)("textarea[name=ExpDescr]").val()),(0,n.default)("input[name=payOnlineInput]").val((0,n.default)("input[name=payOnline]").val()),(0,n.default)("input[name=otherPayInput]").val((0,n.default)("input[name=otherPay]").val()),(0,n.default)("input[name=refund]").val((0,n.default)("input[name=refundSet]").val())},_removeItem:function(e){(0,n.default)(e).parents(".feeitems").remove(),(0,n.default)('div[name="feeitems"]').length<6&&((0,n.default)("#addfee").show(),(0,n.default)("#unaddfee").hide())},_addfeeItem:function(){var e='<div name="feeitems" class="feeitems">\n    <div class="list-block margin">\n      <ul>\n        <li>\n          <div class="item-content">\n            <div class="item-media removeIcon">\n              <span>\n                <img src="'+a(7)+'" alt="">\n              </span>\n            </div>\n            <div class="item-inner">\n              <div class="item-title small-txt high-grey">\n                费用设置\n              </div>\n              <div class="item-after  entered-input" style="width:70%;">\n                <input id="feename" maxlength="20" type="text" name="fyName[]" class="fyName"\n                placeholder="20字以内">\n              </div>\n            </div>\n          </div>\n        </li>\n        <li>\n          <div class="item-content">\n            <div class="item-media">\n            </div>\n            <div class="item-inner">\n              <div class="item-title small-txt high-grey">\n                金额\n              </div>\n              <div class="item-after  entered-input" style="width:70%;">\n                <input class="feeprice" pattern="[0-9]*" type="number" name="fyje[]" placeholder="有人报名后不能修改">\n              </div>\n            </div>\n          </div>\n        </li>\n        <li>\n          <div class="item-content">\n            <div class="item-media">\n            </div>\n            <div class="item-inner">\n              <div class="item-title small-txt high-grey">\n                名额\n              </div>\n              <div class="item-after  entered-input" style="width:70%;">\n                <input class="feenum" pattern="[0-9]*" type="number" name="fyme[]" placeholder="默认不限">\n              </div>\n            </div>\n          </div>\n        </li>\n      </ul>\n    </div>\n</div> ';(0,n.default)("#feeItem").append(e),(0,n.default)('div[name="feeitems"]').length>=6&&((0,n.default)("#addfee").hide(),(0,n.default)("#unaddfee").show())},_showunfee:function(){(0,n.default)(".showunfee").show(),(0,n.default)(".showfee").hide(),(0,n.default)("#unfeeDetail").show(),(0,n.default)("#feeDetail").hide()},_showfee:function(){(0,n.default)(".feeitems").find("input[id=feename]").length>=6&&(0,n.default)("#addfee").hide(),(0,n.default)(".showfee").show(),(0,n.default)(".showunfee").hide(),(0,n.default)("#feeDetail").show(),(0,n.default)("#unfeeDetail").hide(),(0,n.default)("#costDesc").show()}};t.costWay=u},27:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EditapplyOption=t.AddapplyOption=void 0,a(53);var n=d(a(2)),i=a(9),l=d(a(0));function d(e){return e&&e.__esModule?e:{default:e}}var f={ItemHt:'<li>\n    <div class="item-content">\n        <div class="item-media removeIcon button_removeItem">\n            <span class=""><img src='+a(7)+' alt=""></span>\n        </div>\n        <div class="item-inner">\n            <div class="item-title  entered-input">\n                <input maxlength="10" type="text" placeholder="请输入候选项" style="text-align:left" class="">\n            </div>\n        </div>\n    </div>\n</li>',applyItem:{},init:function(){var e=this;(0,l.default)(".button_addItem").on("click",function(t){e.addOption(t.currentTarget)}),(0,l.default)(".bakeInfo").on("click",".button_removeItem",function(t){e.removeOption(t.currentTarget)}),(0,l.default)(".apply-option-show").on("click",function(e){(0,l.default)(".apply-edit-list").is(":hidden")?((0,l.default)(".apply-edit-list").show(),(0,l.default)(e.currentTarget).addClass("apply-bake-opt")):((0,l.default)(".apply-edit-list").hide(),(0,l.default)(e.currentTarget).removeClass("apply-bake-opt"),(0,l.default)(".button_zjxx").unbind())})},confirm:function(){var e="",t=(0,l.default)("#infoEdit .bakeInfo input"),a=t.length;if(""===(0,i.Trim)((0,l.default)(".apply-text").val(),"g"))return n.default.alert("报名主选项还没有填写哦"),!1;if((0,l.default)(".apply-option-show").hasClass("apply-bake-opt")){for(var d=0;d<a;d++){if(""===(0,i.Trim)((0,l.default)(t[d]).val(),"g")){n.default.alert("第"+(d+1)+"项候选项没有填写哦"),e=!1;break}e+=(0,i.Trim)((0,l.default)(t[d]).val(),"g"),d<a-1&&(e+=",")}e&&","===e.substring(e.length-1)&&(e=e.substring(0,e.lastIndexOf(",")))}else e="";return(0,l.default)(".apply-text").val().length>10?(n.default.alert("请输入最多10个描述字符"),!1):(this._checkOptions((0,l.default)(".apply-text").val(),!1)&&(n.default.alert("该填写项已经存在"),e=!1),e)},_checkOptions:function(e,t){var a=!1;if(t){(0,l.default)(".apply-options .col-33").not(".editDoing").each(function(t){var a=(0,l.default)(this).find(".bm-item").html();(0,i.Trim)(a,"g"),(0,i.Trim)(e,"g")})}else(0,l.default)(".apply-options .col-33").not(".editDoing").each(function(t){var n=(0,l.default)(this).find(".bm-item").html();(0,i.Trim)(n,"g")===(0,i.Trim)(e,"g")&&(a=!0)});return a},addOption:function(e){(0,l.default)(".bakeInfo").find("li").length>6?n.default.alert("最多只能添加8个选项"):(0,l.default)(e).parents("li").before(this.ItemHt)},removeOption:function(e){(0,l.default)(e).parents("li").remove(),(0,l.default)(".button_removeItem").unbind()},show:function(){(0,l.default)("#applyOptions").show()},hide:function(e){(0,l.default)("#applyOptions").hide(),(0,l.default)(".apply-text,.apply-edit-list div :input").val(""),(0,l.default)(".button_addItem").parents("li").siblings().remove(),(0,l.default)(e)&&(0,l.default)(e).removeClass("editDoing")}},u={},s={};Object.setPrototypeOf(u,f),Object.setPrototypeOf(s,f),s.Editinit=function(){var e=this;(0,l.default)(".apply-options").on("click",".edit-item",function(t){e.Editshow(t.currentTarget)})},s.Editshow=function(e){var t=(0,l.default)(e).find("a").html(),i=(0,l.default)(e).find("a").attr("data-child").split(",");(0,l.default)(e).addClass("editDoing");var d=this;(0,l.default)(".confirm").hide(),(0,l.default)(".edit-comfirm").show(),n.default.actionSheet([{label:"编辑",onClick:function(){d.show(),(0,l.default)(".edit-comfirm").off("click").on("click",function(){d.Editcomfirm(e)}),(0,l.default)(".cancel").off("click").on("click",function(){d.hide(e)}),(0,l.default)(".addWay-title").find("h2").html("编辑填写项"),(0,l.default)(".apply-text").val(t),(0,l.default)(".button_addItem").parents("li").siblings().remove(),(0,l.default)("#infoEdit").attr("target-id",(0,l.default)(e).attr("id"));for(var n=0;n<i.length;n++)(0,l.default)(".bakeInfo").prepend('<li>\n            <div class="item-content">\n                <div class="item-media removeIcon button_removeItem">\n                    <span class=""><img src='+a(7)+' alt=""></span>\n                </div>\n                <div class="item-inner">\n                    <div class="item-title  entered-input">\n                        <input value="'+i[n]+'" maxlength="10" type="text" placeholder="请输入候选项" style="text-align:left" class="">\n                    </div>\n                </div>\n            </div>\n        </li>')}},{label:"删除",onClick:function(){var t=void 0,a=JSON.parse(window.sessionStorage.getItem("applyItems")),n=(0,l.default)(e).find("a").text();for(t in(0,l.default)(e).remove(),a)t===n&&(delete a[t],delete d.applyItem[n]);window.sessionStorage.setItem("applyItems",JSON.stringify(a))}}],[{label:"取消",onClick:function(){(0,l.default)(e).removeClass("editDoing")}}])},s.Editcomfirm=function(e){var t=this,a=(0,l.default)("#infoEdit").attr("target-id"),i=(0,l.default)(".editDoing").find("a").text(),d=(0,l.default)(".apply-text").val(),f=this.confirm(),u=void 0,s=JSON.parse(window.sessionStorage.getItem("applyItems"));if(f||0===f.length){for(u in(0,l.default)("#"+a).html('<a class="bm-item apply-active" data-child='+f+">"+d+"</a>"),s)u===i&&(delete s[u],delete t.applyItem[u],s[d]=f.split(","),t.applyItem[d]=f.split(","));window.sessionStorage.setItem("applyItems",JSON.stringify(s)),n.default.alert("修改成功!",function(){t.hide(e)})}},u.Addshow=function(){var e=this;(0,l.default)(".apply-options .col-33").length>=11?n.default.alert("添加项目数量到达上限!"):(this.show(),(0,l.default)(".cancel").off("click").on("click",function(){e.hide()}),(0,l.default)(".addWay-title").find("h2").html("新增填写项"),(0,l.default)(".confirm").show(),(0,l.default)(".edit-comfirm").hide())},u.Addconfirm=function(){var e=this,t=this.confirm(),a=(0,l.default)(".apply-text").val(),i='<li class="edit-item col-33" id=bm_'+((0,l.default)(".apply-options .col-33").length-1)+'>\n            <a class="bm-item apply-active" data-child='+t+">"+a+"</a>\n        </li>";if(t||0===t.length){(0,l.default)("#addItem").before(i),this.applyItem[a]=t.split(",");var d=JSON.stringify(this.applyItem);window.sessionStorage.setItem("applyItems",d),n.default.alert("添加成功",function(){e.hide()})}},u.Addinit=function(){var e=this;this.init();var t=["身份证号","真实姓名"];(0,l.default)("#addItem").on("click",function(){e.Addshow()}),(0,l.default)(".apply-item").on("click",function(e){if((0,l.default)(e.currentTarget).find(".bm-item").hasClass("apply-active-only"))return!1;if((0,l.default)(e.currentTarget).find(".bm-item").hasClass("apply-active")){(0,l.default)(e.currentTarget).find(".bm-item").removeClass("apply-active");for(var a=0;a<t.length;a++)t[a]===(0,l.default)(e.currentTarget).find(".bm-item").html()&&t.splice(a,1)}else(0,l.default)(e.currentTarget).find(".bm-item").addClass("apply-active"),t.push((0,l.default)(e.currentTarget).find(".bm-item").html());(0,l.default)("#defaultOptions").val(t)}),(0,l.default)(".confirm").on("click",function(){e.Addconfirm()})},t.AddapplyOption=u,t.EditapplyOption=s},29:function(e,t,a){"use strict";a(62),a(56);var n=a(8),i=a(11),l=o(a(0)),d=o(a(2)),f=a(27),u=a(26),s=o(a(4));function o(e){return e&&e.__esModule?e:{default:e}}var c,r,p={regexp:{PHONE:o(a(10)).default.mobile()}},m=(c={init:function(){this.setRight()},setRight:function(){(0,l.default)(".banner-right a").html("草稿箱"),(0,l.default)(".banner-right a").attr("href","draft-box.html")}},r=function(){(0,l.default)("#actCost").on("click",function(){u.costWay.show()})},{pageInit:function(){var e=this;c.init(),f.AddapplyOption.Addinit(),f.EditapplyOption.Editinit(),u.costWay.init(),r(),(0,l.default)(".actTime").on("click",function(e){n.pickerData.showDate(e.currentTarget)}),(0,l.default)(".actAddr").on("click",function(e){n.pickerAddr.showAddr(e.currentTarget)}),(0,l.default)(".actCover").on("click",function(){i.upload.init({maxLength:1,fileVal:"imgfile"})}),(0,l.default)(".bm-way-item").on("click",function(e){(0,l.default)(e.currentTarget).addClass("active").siblings(".bm-way-item").removeClass("active"),(0,l.default)("#gr").hasClass("active")?((0,l.default)(e.currentTarget).parents("li").nextAll("li").hide(),(0,l.default)("#hdbmfs").val("个人")):(0,l.default)("#zd").hasClass("active")&&((0,l.default)(e.currentTarget).parents("li").nextAll("li").show(),(0,l.default)("#hdbmfs").val("组队"))}),(0,l.default)(".bm-way-item").on("click",function(e){(0,l.default)(e.currentTarget).addClass("active").siblings(".bm-way-item").removeClass("active"),(0,l.default)("#gr").hasClass("active")?((0,l.default)("#bmWay").hide(),(0,l.default)("#hdbmfs").val("个人")):(0,l.default)("#zd").hasClass("active")&&((0,l.default)("#bmWay").show(),(0,l.default)("#hdbmfs").val("组队"))}),(0,l.default)("#actSubmit").click(function(t){var a=e;d.default.form.validate("#createAct",function(e){if(console.log(e),!e){var t=d.default.loading("提交中...");setTimeout(function(){t.hide(),a._postActData(),d.default.toast("提交成功",3e3)},1500)}},p)})},_postActData:function(){s.default.createActData((0,l.default)("#createAct")).then(function(){d.default.alert("提交成功")}).catch(function(e){d.default.alert("数据获取有误")})}});(0,l.default)(function(){m.pageInit()})},51:function(e,t){},53:function(e,t){},56:function(e,t){},7:function(e,t){e.exports="/imgs/removeIcon-38cac.png"}},[[29,1,2]]]);